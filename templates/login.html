<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/static/bootstrap-3.3.7-dist/css/bootstrap.min.css">
    <script src="/static/jquery-3.3.1.js"></script>
    <title>登录</title>
    <div style="position:fixed; z-index: -1; width: 100%; height: 100%; left: 0px; top:0px;">
         <img src="/static/img/jb3.jpg" width="100%" height="100%"/>
    </div>
{#    <div style="position:fixed; z-index: -2; width: 100%; height: 100%; left: 0px; top:50px;">#}
{#         <img src="/static/img/登录.jpg" width="100%" height="100%" />#}
{#    </div>#}

    <style>
        .error {
            margin-left: 15px;
            color: red;
        }

        .panel-primary > .panel-heading {
            color: #ffffff;
            background-color: #508fc4;
            border-color: #202c3c;
        }
        .footer{
            {#width: 100%;#}
            margin: 100px 100px ;
            {#padding: 0px;#}
            {#clear: both;#}
        }


        body {
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 25px;
            line-height: 2;
            color: #001556;
            {#background: url("/static/img/jb3.jpg");#}
        }
        .place{
            margin-top: 10%;
        }
        .spacing{
            margin-top: 30px;
        }
    </style>
</head>
<body>
<div class="head">

</div>
<div class="container-fluid" >
{#    <img src="/static/img/IMG_6349.JPG" width="100%" height="100%"/>#}
    <div class="row" >
        <div class="col-md-6 place">
            <div class="panel panel-primary ">
                <div class="panel-heading"><h2>信息工程学院信息管理系统</h2></div>
                <form>
                    {% csrf_token %}
                    <div class="form-group spacing ">
                       <label for="name">用户名</label>
                        <input type="text" id="name" class="form-control">
                    </div>
                    <div class="form-group spacing ">
                        <label for="pwd">密码</label>
                        <input type="password" id="pwd" class="form-control">
                    </div>
                    <div class="form-group spacing">

                        <span class="col-md-offset-1"><input type="radio" name="type" id="admin" class="type" value="admin"><label
                                for="admin">管理员</label></span>
                        <span class="col-md-offset-1"><input type="radio" name="type" id="teacher" class="type" value="teacher"><label
                                for="teacher">老师</label></span>
                        <span class="col-md-offset-1"><input type="radio" name="type" id="student" class="type" value="student"><label
                                for="student">学生</label></span>
                    </div>
                    <br>
                        <input type="button" value="登录" class="btn btn-primary btn-lg col-md-6 col-md-offset-1" id="btn"><span class="error"></span>


                </form>
                <br>

            </div>
        </div>

    </div>
</div>


<br>
			<span class="cr"> &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp
                &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp Copyright©2019
                信息工程学院 版权所有
                &nbsp &nbsp&nbsp &nbsp 邮编：313000
                &nbsp &nbsp&nbsp &nbsp 技术支持：张炳圣
                <br>　 &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp&nbsp &nbsp &nbsp &nbsp
                &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp
                Email : qzxy@zjhu.edu.cn
                &nbsp &nbsp &nbsp &nbsp 地址：中国·浙江 湖州市吴兴区学士路1号</span>

</body>
<script>

!function(){

 function n(n,e,t){

 return n.getAttribute(e)||t

 }

 function e(n){

 return document.getElementsByTagName(n)

 }

 function t(){

 var t=e("script"),o=t.length,i=t[o-1];

 return{

 l:o,z:n(i,"zIndex",-1),o:n(i,"opacity",.5),c:n(i,"color","0,0,0"),n:n(i,"count",99)

 }

 }

 function o(){

 a=m.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,

 c=m.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight

 }

 function i(){

 r.clearRect(0,0,a,c);

 var n,e,t,o,m,l;

 s.forEach(function(i,x){

 for(i.x+=i.xa,i.y+=i.ya,i.xa*=i.x>a||i.x<0?-1:1,i.ya*=i.y>c||i.y<0?-1:1,r.fillRect(i.x-.5,i.y-.5,1,1),e=x+1;e<u.length;e++)n=u[e],

 null!==n.x&&null!==n.y&&(o=i.x-n.x,m=i.y-n.y,

 l=o*o+m*m,l<n.max&&(n===y&&l>=n.max/2&&(i.x-=.03*o,i.y-=.03*m),

 t=(n.max-l)/n.max,r.beginPath(),r.lineWidth=t/2,r.strokeStyle="rgba("+d.c+","+(t+.2)+")",r.moveTo(i.x,i.y),r.lineTo(n.x,n.y),r.stroke()))

 }),

 x(i)

 }

 var a,c,u,m=document.createElement("canvas"),

 d=t(),l="c_n"+d.l,r=m.getContext("2d"),
x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||

 function(n){

 window.setTimeout(n,1e3/45)

 },

 w=Math.random,y={x:null,y:null,max:2e4};m.id=l,m.style.cssText="position:fixed;top:0;left:0;z-index:"+d.z+";opacity:"+d.o,e("body")[0].appendChild(m),o(),window.onresize=o,

 window.onmousemove=function(n){

 n=n||window.event,y.x=n.clientX,y.y=n.clientY

 },

 window.onmouseout=function(){

 y.x=null,y.y=null

 };

 for(var s=[],f=0;d.n>f;f++){

 var h=w()*a,g=w()*c,v=2*w()-1,p=2*w()-1;s.push({x:h,y:g,xa:v,ya:p,max:6e3})

 }

 u=s.concat([y]),

 setTimeout(function(){i()},100)

 }();

 </script>

<script type="text/javascript">
/* 鼠标特效 */
var a_idx = 0;
jQuery(document).ready(function($) {
    $("body").click(function(e) {
        var a = new Array("明体","达用");
        var $i = $("<span></span>").text(a[a_idx]);
        a_idx = (a_idx + 1) % a.length;
        var x = e.pageX,
        y = e.pageY;
        $i.css({
            "z-index": 9,
            "top": y - 20,
            "left": x,
            "position": "absolute",
            "font-weight": "bold",
            "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"
        });
        $("body").append($i);
        $i.animate({
            "top": y - 180,
            "opacity": 0
        },
        1500,
        function() {
            $i.remove();
        });
    });
});
</script>
<script>

    $("#btn").click(function () {
        $.ajax({
            url: '/login/',
            type: 'post',
            data: {
                'name': $("#name").val(),
                'pwd': $("#pwd").val(),
                'type':$("input[type=radio]:checked").val(),
                'csrfmiddlewaretoken': $('[name="csrfmiddlewaretoken"]').val()
            },
            success: function (data) {
                console.log(data);
                if (data.status==100) {
                    if (data.genre == 'admin'){
                        {#location.href = '/student_list/?username='+data.name#}
                        location.href = '/student_list/'
                    }else if (data.genre == 'teacher'){
                        {#location.href = '/te_student_list/?username='+data.name#}
                        location.href = '/te_student_list/'
                    }else{
                        {#location.href = '/student_index/?username='+data.name#}
                        location.href = '/st_grade_list/'
                    }
                } else {
                    $(".error").html(data.msg)
                }
            }
        })
    })

</script>
</html>